# قائمة التحقق من النشر - Tabakh Dziri

استخدم هذه القائمة للتأكد من اكتمال جميع خطوات النشر بنجاح.

## المرحلة 1: إعداد VPS

- [ ] الاتصال بـ VPS عبر SSH بنجاح
- [ ] تحديث النظام (`sudo apt update && sudo apt upgrade -y`)
- [ ] تثبيت Node.js 24.x
- [ ] تثبيت Nginx
- [ ] تثبيت PM2
- [ ] تثبيت Git
- [ ] إعداد Firewall (UFW)

## المرحلة 2: قاعدة البيانات

- [ ] اختيار MongoDB (Atlas أو محلي)
- [ ] إعداد MongoDB بنجاح
- [ ] الحصول على Connection String
- [ ] اختبار الاتصال بقاعدة البيانات

## المرحلة 3: رفع الكود

- [ ] إنشاء مجلد المشروع (`/var/www/tabakhdziri`)
- [ ] رفع كود Backend
- [ ] رفع كود Frontend
- [ ] التحقق من وجود جميع الملفات

## المرحلة 4: إعداد Backend

- [ ] تثبيت dependencies (`npm install --production`)
- [ ] إنشاء ملف `.env`
- [ ] تكوين جميع متغيرات البيئة:
  - [ ] `NODE_ENV=production`
  - [ ] `PORT=5000`
  - [ ] `MONGODB_URI`
  - [ ] `JWT_SECRET` (تم تغييره من القيمة الافتراضية)
  - [ ] `FRONTEND_URL`
  - [ ] إعدادات البريد الإلكتروني (إذا لزم الأمر)
- [ ] إنشاء مجلدات uploads
- [ ] تعيين الصلاحيات الصحيحة للمجلدات

## المرحلة 5: إعداد Frontend

- [ ] تثبيت dependencies (`npm install`)
- [ ] إنشاء ملف `.env.local`
- [ ] تكوين `NEXT_PUBLIC_API_URL`
- [ ] بناء المشروع (`npm run build`)
- [ ] التحقق من نجاح البناء

## المرحلة 6: PM2

- [ ] تشغيل Backend بـ PM2
- [ ] تشغيل Frontend بـ PM2
- [ ] حفظ تكوين PM2 (`pm2 save`)
- [ ] إعداد PM2 للتشغيل التلقائي (`pm2 startup`)
- [ ] التحقق من حالة التطبيقات (`pm2 status`)

## المرحلة 7: Nginx

- [ ] إنشاء ملف تكوين Nginx
- [ ] تكوين proxy للـ Backend (`/api`)
- [ ] تكوين proxy للـ Frontend (`/`)
- [ ] تكوين مسار الصور (`/uploads`)
- [ ] تفعيل الموقع
- [ ] حذف التكوين الافتراضي
- [ ] اختبار التكوين (`sudo nginx -t`)
- [ ] إعادة تشغيل Nginx

## المرحلة 8: DNS

- [ ] إضافة سجل A للنطاق الرئيسي (@)
- [ ] إضافة سجل A لـ www
- [ ] (اختياري) إضافة سجل A لـ api
- [ ] انتظار انتشار DNS
- [ ] التحقق من DNS باستخدام `nslookup` أو `dig`

## المرحلة 9: SSL/HTTPS

- [ ] تثبيت Certbot
- [ ] الحصول على شهادة SSL
- [ ] تحديث `FRONTEND_URL` في `.env` إلى https
- [ ] إعادة تشغيل Backend
- [ ] اختبار التجديد التلقائي للشهادة
- [ ] التحقق من عمل HTTPS

## المرحلة 10: الأمان

- [ ] تغيير جميع كلمات المرور الافتراضية
- [ ] تغيير `JWT_SECRET`
- [ ] تأمين MongoDB:
  - [ ] تفعيل المصادقة
  - [ ] إنشاء مستخدم قاعدة بيانات
  - [ ] تقييد الوصول من IP معينة (إذا كان Atlas)
- [ ] تأمين SSH:
  - [ ] تعطيل تسجيل الدخول كـ root
  - [ ] استخدام SSH keys بدلاً من كلمات المرور
- [ ] تثبيت Fail2Ban
- [ ] مراجعة صلاحيات الملفات

## المرحلة 11: إعداد Admin

- [ ] تشغيل سكريبت `create-admin.js`
- [ ] تسجيل الدخول إلى لوحة الإدارة
- [ ] تغيير كلمة مرور Admin
- [ ] إنشاء حسابات admin إضافية (إذا لزم الأمر)

## المرحلة 12: النسخ الاحتياطي

- [ ] نسخ سكريبت `backup.sh` إلى `/usr/local/bin/`
- [ ] تعيين صلاحيات التنفيذ
- [ ] اختبار السكريبت يدوياً
- [ ] إعداد cron job للنسخ الاحتياطي اليومي
- [ ] التحقق من عمل النسخ الاحتياطي التلقائي

## المرحلة 13: المراقبة

- [ ] نسخ سكريبت `health-check.sh` إلى `/usr/local/bin/`
- [ ] تعيين صلاحيات التنفيذ
- [ ] اختبار السكريبت يدوياً
- [ ] (اختياري) إعداد cron job للفحص الدوري
- [ ] (اختياري) إعداد إشعارات البريد الإلكتروني/Webhook

## المرحلة 14: الاختبار

- [ ] اختبار الصفحة الرئيسية
- [ ] اختبار صفحات المنتجات
- [ ] اختبار صفحة الخدمات
- [ ] اختبار صفحة التواصل
- [ ] اختبار تسجيل الدخول
- [ ] اختبار لوحة الإدارة:
  - [ ] إدارة الأطباق
  - [ ] إدارة الفئات
  - [ ] إدارة الطلبات
  - [ ] إدارة المستخدمين
  - [ ] إدارة Instagram Posts
- [ ] اختبار رفع الصور
- [ ] اختبار عربة التسوق
- [ ] اختبار إنشاء طلب
- [ ] اختبار نموذج التواصل
- [ ] اختبار على الهاتف المحمول
- [ ] اختبار على متصفحات مختلفة

## المرحلة 15: الأداء

- [ ] اختبار سرعة التحميل
- [ ] التحقق من ضغط الصور
- [ ] التحقق من caching headers
- [ ] (اختياري) إعداد CDN للصور
- [ ] (اختياري) تفعيل Gzip compression في Nginx

## المرحلة 16: SEO

- [ ] التحقق من وجود favicon
- [ ] التحقق من meta tags
- [ ] التحقق من sitemap.xml
- [ ] التحقق من robots.txt
- [ ] إضافة الموقع إلى Google Search Console
- [ ] إضافة الموقع إلى Google Analytics (اختياري)

## المرحلة 17: التوثيق

- [ ] توثيق بيانات الدخول:
  - [ ] بيانات VPS
  - [ ] بيانات MongoDB
  - [ ] بيانات Admin
  - [ ] بيانات DNS
- [ ] توثيق الإعدادات المخصصة
- [ ] إنشاء دليل للصيانة
- [ ] مشاركة المعلومات مع الفريق

## المرحلة 18: الإطلاق

- [ ] إعلام الفريق بموعد الإطلاق
- [ ] التحقق النهائي من جميع الوظائف
- [ ] مراقبة السجلات بعد الإطلاق
- [ ] الاستعداد للدعم الفني

## بعد الإطلاق

- [ ] مراقبة الأداء في الأيام الأولى
- [ ] مراقبة السجلات للأخطاء
- [ ] جمع ملاحظات المستخدمين
- [ ] إنشاء قائمة بالتحسينات المستقبلية

---

## ملاحظات مهمة

### كلمات المرور التي يجب تغييرها:
1. كلمة مرور Admin الافتراضية
2. JWT_SECRET في .env
3. SESSION_SECRET في .env
4. كلمة مرور MongoDB (إذا كان محلي)
5. كلمة مرور VPS

### الملفات الحساسة (لا ترفعها إلى Git):
- `.env`
- `.env.local`
- `node_modules/`
- `uploads/`
- `.next/`
- `*.log`

### جهات الاتصال للطوارئ:
- مزود VPS: _______________
- مزود النطاق: _______________
- الدعم الفني: _______________

### روابط مهمة:
- الموقع: https://tabakhdziri.com
- لوحة الإدارة: https://tabakhdziri.com/admin
- VPS Panel: _______________
- DNS Panel: _______________
- MongoDB Atlas: https://cloud.mongodb.com

---

**تاريخ النشر**: _______________
**نشر بواسطة**: _______________
**الإصدار**: 1.0.0
